<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>keigo</title>

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Julius+Sans+One&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Nanum+Brush+Script&display=swap"
      rel="stylesheet"
    />
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Arvo:ital,wght@0,400;0,700;1,400;1,700&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Anton&display=swap"
      rel="stylesheet"
    />

    <style>
      /* ---------- Base layout ---------- */
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        font-family: "Julius Sans One", sans-serif;
        background: url(./main-bg.jpg) no-repeat center center fixed;
        background-size: cover;
      }

      #particles {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;
      }

      .container {
        position: relative;
        z-index: 1;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
      }

      h1 {
        margin: 0;
        font-size: 4rem;
        color: #fff;
        letter-spacing: 0.3rem;
      }

      /* ---------- Landing panels ---------- */
      .landing {
        display: none;
        position: relative;
        z-index: 1;
        height: 100%;
        width: 100%;
        flex-direction: row;
      }
      .left-panel {
        width: 30%;
        background: #000;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.5s ease-out, opacity 0.5s ease-out, filter 0.5s ease-out;
        transform: translateX(-100%);
        opacity: 0;
        filter: blur(8px);
        flex-direction: column;
      }
      .left-panel.slide-in {
        transform: translateX(0);
        opacity: 1;
        filter: blur(0);
      }
      .left-panel img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .center-panel {
        flex: 1;
        background: transparent;
        padding: 3vw;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        position: relative;
        z-index: 1;
      }
      .center-panel::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.03) 70%);
        pointer-events: none;
        z-index: 2;
        opacity: 0.3;
      }
      .center-panel.reveal {
        opacity: 1;
        transform: translateY(0);
      }

      /* ---------- Typography ---------- */
      .arvo-regular {
        font-family: "Arvo", serif;
        font-weight: 400;
      }
      .arvo-bold {
        font-family: "Arvo", serif;
        font-weight: 700;
      }
      .arvo-regular-italic {
        font-family: "Arvo", serif;
        font-weight: 400;
        font-style: italic;
      }
      .arvo-bold-italic {
        font-family: "Arvo", serif;
        font-weight: 700;
        font-style: italic;
      }

      /* ---------- Responsive ---------- */
      @media (max-width: 768px) {
        .landing {
          flex-direction: column;
        }
        .left-panel {
          width: 100%;
          height: 40%;
        }
        .center-panel {
          padding: 5vw;
          height: 60%;
        }
      }
      .blink {
        animation: blink 1s infinite alternate;
      }

      @keyframes blink {
        0% {
          opacity: 0.6;
        }
        25% {
          opacity: 1;
        }
        50% {
          opacity: 0.8;
        }
        75% {
          opacity: 1;
        }
      }

      .neon {
        text-shadow: 0 0 7px #fff, 0 0 10px #fff, 0 0 21px #fff, 0 0 42px #fff, 0 0 82px #fff, 0 0 92px #fff;

        pointer-events: none;
      }

      /* Ajustar texto responsivo para long-presentation */
      .long-presentation {
        font-size: clamp(0.65rem, 2vw, 0.8rem);
        line-height: 1.6;
        padding: 1rem;
        max-height: 40vh;
        overflow-y: auto;
        word-wrap: break-word;
      }

      /* Ajustar tamaño de usuario e ID responsivamente */
      .username {
        font-size: clamp(0.8rem, 2.5vw, 1rem);
      }

      .profile .id {
        font-size: clamp(0.7rem, 2vw, 0.9rem);
      }

      /* Imagen de perfil responsive dentro del panel fijo */
      .profile img {
        width: clamp(40px, 10vw, 60px);
        height: clamp(40px, 10vw, 60px);
      }

      /* Kanji responsive sin perder su estilo */
      #kanji {
        font-size: clamp(50px, 12vw, 80px);
      }

      /* Texto de reproductor (cronómetro) */
      .aCron {
        font-size: clamp(0.7rem, 1.8vw, 0.9rem);
      }

      /* Contenedor del audio: evitar que se rompa en móviles */
      .aWrap {
        width: 100%;
        max-width: 550px;
        flex-wrap: wrap;
      }
    </style>
    <style>
      /* (A) MATERIAL ICONS */
      .aWrap .svg-inline--fa {
        color: white !important;
      }

      /* (B) WRAPPER */
      .aWrap {
        font-family: Arial, Helvetica, sans-serif;
        display: flex;
        align-items: center;
        justify-content: space-between;
        /* allow buttons to wrap into another row on small screens */
        /* flex-wrap: wrap; */
        width: 550px;
        padding: 10px 30px;
        margin: 5px 0;
        border-radius: 10px;
        background: black;
        gap: 1rem;
      }

      .aWrap,
      .aWrap * {
        box-sizing: border-box;
      }

      /* (C) PLAY/PAUSE BUTTON */
      .aPlay {
        padding: 0;
        margin: 0;
        background: 0;
        border: 0;
        cursor: pointer;
      }

      /* (D) TIME */
      .aCron {
        font-size: 14px;
        color: #cbcbcb;
        margin: 0 10px;
      }

      /* (E) RANGE SLIDERS */
      /* (E1) HIDE DEFAULT */
      .aWrap input[type="range"] {
        appearance: none;
        border: none;
        outline: none;
        box-shadow: none;
        width: 150px;
        padding: 0;
        margin: 0;
        background: 0;
      }

      .range,
      .range-volume {
        position: relative;
        display: flex;
        align-items: center;
      }

      .range input,
      .range-volume input {
        position: relative;
        z-index: 1;
      }

      .range .change-range,
      .range-volume .change-range {
        position: absolute;
        left: 0;
        top: 0;
        height: 6px;
        width: 0px;
        background-color: rgb(187, 187, 187);
        border-radius: 10px 0 0 10px;
      }

      .range-volume .change-range {
        height: 10px;
        width: 95%;
      }

      .under-ranger {
        position: absolute;
        left: 0;
        top: 0;
        height: 6px;
        width: 100%;
        background-color: rgb(63, 63, 63);
        border-radius: 10px;
      }

      .range-volume .under-ranger {
        height: 10px;
      }

      .aWrap input[type="range"]::-webkit-slider-thumb {
        appearance: none;
      }

      /* (E2) CUSTOM SLIDER TRACK */
      .aWrap input[type="range"]::-webkit-slider-runnable-track {
        background: transparent;
        height: 6px;
        border-radius: 10px;
      }

      /* (E3) CUSTOM SLIDER BUTTON */
      .aWrap input[type="range"]::-webkit-slider-thumb {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        border: 0;
        background: #fff;
        position: relative;
        cursor: pointer;
        margin-top: -5px;
      }

      .aWrap input[type="range"]::-moz-range-thumb {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        border: 0;
        background: #fff;
        position: relative;
        cursor: pointer;
        margin-top: -5px;
      }

      /* (F) VOLUME */
      .aVolIco {
        margin: 0 10px;
        cursor: pointer;
      }

      input.aVolume {
        width: 100px !important;
      }

      .aVolume::-webkit-slider-runnable-track {
        height: 10px !important;
      }

      .aVolume::-webkit-slider-thumb {
        margin-top: -3px !important;
      }

      .aVolume::-moz-range-thumb {
        margin-top: -3px !important;
      }

      .volume-container {
        display: flex;
        align-items: center;
      }
      .presentation-container,
      .profile-container {
        display: block;
      }
      .long-presentation {
        font-family: "Courier New", Courier, monospace;
        font-weight: 400;
        font-size: 0.7rem;
        color: #fff;
        padding: 20px;
        line-height: 1.6;
        max-width: 600px;
        text-align: justify;
      }
      .player-container {
        position: absolute;
        bottom: 00px;
        left: 50%;
        transform: translateX(-50%);
        width: 100%;
        display: flex;
        justify-content: center;
      }
      .profile {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-direction: column;
      }
      .profile .id {
        background: #ffffff;
        padding: 1px 16px;
        color: black;
        border-radius: 30px;
        display: block;
        font-family: "Courier New", Courier, monospace;
        font-size: 12px;
      }

      .profile img {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        transition: transform 0.6s;
        transform-style: preserve-3d;
        cursor: pointer;
      }

      .profile img.spin {
        animation: flip-coin 1s ease forwards;
      }
      @keyframes flip-coin {
        0% {
          transform: rotateY(0);
        }
        50% {
          transform: rotateY(180deg);
        }
        100% {
          transform: rotateY(360deg);
        }
      }

      .username {
        font-family: "Courier New", Courier, monospace;
        font-weight: 700;
        color: #ffffff;
      }

      .vertical-text-left {
        position: absolute;
        top: 20px;
        left: 20px;
        color: #000;
        font-size: 50px;
        border: 10px solid #000;
        padding: 10px;
        font-weight: bolder;
        writing-mode: vertical-rl;
        text-orientation: upright;
        font-size: clamp(24px, 2vw, 50px);
      }

      .phrase-container-right {
        position: absolute;
        top: 50%;

        transform: translate(3%, -50%);
        background: black;
        font-family: "Courier New", Courier, monospace;

        bottom: 20px;
        right: 20px;
        color: #ffffff;
        font-size: 14px;
        border: 5px solid #000;
        padding: 10px;
        font-weight: bolder;
        max-width: 300px;
        height: 68px;
        text-align: center;
      }
      .anton-regular {
        font-family: "Anton", sans-serif;
        font-weight: 400;
        font-style: normal;
      }
      .invictus {
        position: absolute;
        /* top: -75px; */
        top: clamp(-40px, -10vw, -75px);
        /* font-size: 270px; */
        color: #484873;
        font-size: clamp(80px, 15vw, 270px);
      }
      .center-img {
        z-index: 5;
        position: relative;
        position: fixed;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        z-index: 2;
        height: 90%;
        pointer-events: none;
      }
      .copo {
        display: inline-block;
        transition: transform 5s ease-in-out;
        cursor: pointer;
        user-select: none;
        font-size: 70px;
        padding: 0px;
        margin: 0px;
        color: whitesmoke;
      }
      #kanji-container {
        position: relative;
        display: inline-block;
        font-size: 80px;
        font-weight: bold;
        font-family: sans-serif;
      }

      #kanji {
        animation: heartbeat 1s infinite;
        display: inline-block;
        position: relative;
        z-index: 2;
        cursor: pointer;
        color: #ffffff;
      }

      .trail {
        position: absolute;
        color: red;
        opacity: 0.6;
        animation: trail-fade 1s forwards;
        z-index: 1;
        pointer-events: none;
      }

      #message {
        opacity: 0;
        transition: opacity 0.5s ease;
        margin-top: 20px;
        font-size: 24px;
        font-family: sans-serif;
      }

      #message.show {
        opacity: 1;
      }

      @keyframes heartbeat {
        0%,
        100% {
          transform: scale(1);
        }
        25% {
          transform: scale(1.2);
        }
        50% {
          transform: scale(1);
        }
        75% {
          transform: scale(1.1);
        }
      }

      @keyframes trail-fade {
        0% {
          transform: scale(1);
          opacity: 0.6;
        }
        100% {
          transform: scale(2);
          opacity: 0;
        }
      }
    </style>
  </head>

  <body>
    <!-- Snow canvas -->
    <canvas id="particles"></canvas>

    <!-- Intro screen -->
    <div
      class="container"
      id="intro"
    >
      <h1
        class="anton-regular blink neon"
        style="cursor: pointer !important; user-select: none"
      >
        KEIGO
      </h1>
      <p
        class="copo"
        onclick="startSnowfall()"
      >
        ❆
      </p>
    </div>

    <!-- Landing panels -->
    <div
      class="landing"
      id="landing"
    >
      <div
        class="left-panel"
        id="leftPanel"
      >
        <div class="profile-container">
          <div class="profile">
            <img
              src="https://i.ibb.co/9HR3HCtR/Wo0l-ENBc-QJ-Yy1v-DJxff-Ug.png"
              alt="Gina avatar"
              id="avatar"
            />
            <span class="username">@keigo</span>
            <span class="id">19950227</span>
          </div>
        </div>
        <div id="kanji-container">
          <span id="kanji">強</span>
        </div>
        <div
          class="presentation-container"
          id="message"
        >
          <p
            class="long-presentation"
            style="margin-bottom: 0px; padding-bottom: 0px"
          >
            Don’t Try to Understand Me
          </p>
          <p class="long-presentation">
            Don’t try to understand me because you wouldn’t understand, you wouldn’t understand how, being so big and so strong, I sometimes feel so small and so weak. Don’t try to understand me,
            because you wouldn’t understand, you wouldn’t understand the way I live my days, so fully and aware of everything and everyone, and yet sometimes so distant, so absent. Don’t try to
            understand me because you wouldn’t understand, how I can turn a single tear into poetry, how I draw strength from wounds and create fantasy out of nothing. Don’t try to understand me
            because you wouldn’t understand, how, being so ambitious, I can live without ambitions, and how I can have everything while my hands are empty. Don’t try to understand it because you
            wouldn’t understand, how I can need your company so much, while constantly escaping to my empty room. Don’t try to understand it because you wouldn’t understand, how I can answer so many
            people’s questions yet find no answers to my own. Don’t try to understand me because you wouldn’t understand, my ability to make easy what is often so complicated, and how easily I
            complicate the simplest things. That’s why you shouldn’t try to understand me. I don’t ask you to. And even if I seem to push you away, I’m asking for your company. Don’t try to understand
            my formulas or my ways, much less this way that is so uniquely mine of seeing things and facing life. Don’t try to understand me, or try to understand it, because the funny thing is…
            “sometimes I don’t understand it either.”
          </p>
        </div>

        <!-- ─── left‑panel ────────────────────────────────────────────── -->
        <div class="player-container">
          <div
            class="aWrap"
            data-src="sleepingatlast.mp3"
          >
            <button
              class="aPlay"
              disabled
            >
              <span class="aPlayIco"><i class="fa fa-play"></i></span>
            </button>
            <div class="range">
              <span class="under-ranger"></span>
              <input
                class="aSeek"
                type="range"
                min="0"
                value="0"
                step="1"
                disabled
              /><span class="change-range"></span>
            </div>
            <div class="aCron"><span class="aNow"></span> / <span class="aTime"></span></div>
            <div class="volume-container">
              <span class="aVolIco"><i class="fa fa-volume-up"></i></span>
              <div class="range-volume">
                <span class="under-ranger"></span>
                <input
                  class="aVolume"
                  type="range"
                  min="0"
                  max="1"
                  value="1"
                  step="0.1"
                  disabled
                /><span class="change-range"></span>
              </div>
            </div>
          </div>
        </div>
        <!-- ───────────────────────────────────────────────────────────── -->
      </div>
      <div class="center-panel">
        <div class="vertical-text-left">強くありなさい</div>
        <div class="phrase-container-right">In the fell clutch of circumstance I have not winced nor cried aloud. Under the bludgeonings of chance My head is bloody, but unbowed.</div>
        <p>
          <img
            class="center-img"
            src="./center-img.png"
          />
        </p>
        <div class="anton-regular invictus">INVICTUS</div>
        <div style="position: absolute; right: 20px; bottom: 20px">
          <h1 class="arvo-bold blink neon">𓆩𓄋𓆪</h1>
        </div>
      </div>
    </div>

    <script>
      /* -------------------------------------------------------------
         Canvas & snowflake setup
      ------------------------------------------------------------- */
      const canvas = document.getElementById("particles");
      const ctx = canvas.getContext("2d");
      let particles = [];

      /* Mouse position (start at center to avoid jump) */
      let mouseX = window.innerWidth / 2;
      let mouseY = window.innerHeight / 2;

      /* Update mouse position */
      window.addEventListener("mousemove", (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
      });

      /* Keep canvas full‑screen */
      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener("resize", resizeCanvas);
      resizeCanvas();

      /* Generate flakes */
      function createParticles() {
        particles = [];
        for (let i = 0; i < 800; i++) {
          particles.push({
            x: Math.random() * (canvas.width + 200) - 100,
            y: Math.random() * canvas.height,
            radius: Math.random() * 1.5 + 0.5,
            dx: -Math.random() * 2 - 1,
            dy: Math.random() * 1.5 + 0.5,
            opacity: Math.random() * 0.5 + 0.3,
            rotation: Math.random() * 2 * Math.PI,
            rotationSpeed: (Math.random() - 0.5) * 0.02,
            parallaxFactor: Math.random() * 0.6 + 0.2, // 0.2–0.8
          });
        }
      }

      function drawParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        /* Parallax horizontal inverso (sin cambios) */
        const offsetX = (mouseX - canvas.width / 2) * 0.7;

        /* Desplazamiento vertical SOLO cuando el ratón está por debajo del centro */
        const rawOffsetY = (mouseY - canvas.height / 2) * 0;
        const offsetY = Math.max(rawOffsetY, 0); // ← nunca negativo

        for (const p of particles) {
          /*  ─── Dibujar ───  */
          const drawX = p.x - offsetX * p.parallaxFactor; // inverso en X
          const drawY = p.y + offsetY * p.parallaxFactor; // solo baja en Y

          ctx.save();
          ctx.translate(drawX, drawY);
          ctx.rotate(p.rotation);
          ctx.beginPath();
          ctx.arc(0, 0, p.radius, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(255,255,255,${p.opacity})`;
          ctx.fill();
          ctx.restore();

          /* Movimiento real de la nevada */
          p.x += p.dx;
          p.y += p.dy;
          p.rotation += p.rotationSpeed;

          /* Reciclado de copos */
          if (p.x < -50 || p.y > canvas.height + 50) {
            if (Math.random() < 0.5) {
              p.x = canvas.width + Math.random() * 100;
              p.y = Math.random() * canvas.height;
            } else {
              p.x = Math.random() * (canvas.width + 200) - 100;
              p.y = -10;
            }
          }
        }
        requestAnimationFrame(drawParticles);
      }

      /* -------------------------------------------------------------
         Intro → Landing transition
      ------------------------------------------------------------- */
      function startSnowfall() {
        document.getElementById("intro").style.display = "none";
        const landing = document.getElementById("landing");
        const leftPanel = document.getElementById("leftPanel");
        const centerPanel = document.querySelector(".center-panel");

        landing.style.display = "flex";
        /* Small delay for smoother CSS animation */
        setTimeout(() => {
          leftPanel.classList.add("slide-in");
          centerPanel.classList.add("reveal");

          // 🔊 Reproducir la música después de la animación
          const firstAudioWrap = document.querySelector(".aWrap");
          if (firstAudioWrap && firstAudioWrap.audio) {
            firstAudioWrap.audio.play().catch((e) => {
              console.warn("Autoplay fue bloqueado por el navegador:", e);
            });
          }
        }, 50);
      }

      /* Kick things off */
      createParticles();
      drawParticles();

      var timeString = (secs) => {
        // (A1) HOURS, MINUTES, SECONDS
        let ss = Math.floor(secs),
          hh = Math.floor(ss / 3600),
          mm = Math.floor((ss - hh * 3600) / 60);
        ss = ss - hh * 3600 - mm * 60;

        // (A2) RETURN FORMATTED TIME
        if (hh > 0) {
          mm = mm < 10 ? "0" + mm : mm;
        }
        ss = ss < 10 ? "0" + ss : ss;
        return hh > 0 ? `${hh}:${mm}:${ss}` : `${mm}:${ss}`;
      };

      function setProgress(elTarget) {
        let divisionNumber = elTarget.getAttribute("max") / 100;
        let rangeNewWidth = Math.floor(elTarget.value / divisionNumber);
        if (rangeNewWidth > 95) {
          elTarget.nextSibling.style.width = "95%";
        } else {
          elTarget.nextSibling.style.width = rangeNewWidth + "%";
        }
      }

      for (let i of document.querySelectorAll(".aWrap")) {
        // (B) AUDIO + HTML SETUP + FLAGS
        i.audio = new Audio(encodeURI(i.dataset.src));
        (i.aPlay = i.querySelector(".aPlay")),
          (i.aPlayIco = i.querySelector(".aPlayIco")),
          (i.aNow = i.querySelector(".aNow")),
          (i.aTime = i.querySelector(".aTime")),
          (i.aSeek = i.querySelector(".aSeek")),
          (i.aVolume = i.querySelector(".aVolume")),
          (i.aVolIco = i.querySelector(".aVolIco"));
        i.seeking = false; // user is dragging the seek bar

        // (C) PLAY & PAUSE
        // (C1) CLICK TO PLAY/PAUSE
        i.aPlay.onclick = () => {
          if (i.audio.paused) {
            i.audio.play();
          } else {
            i.audio.pause();
          }
        };

        // (C2) SET PLAY/PAUSE ICON
        i.audio.onplay = () => (i.aPlayIco.innerHTML = '<i class="fa fa-pause"></i>');
        i.audio.onpause = () => (i.aPlayIco.innerHTML = '<i class="fa fa-play"></i>');

        // (D) TRACK PROGRESS & SEEK TIME
        // (D1) TRACK LOADING
        i.audio.onloadstart = () => {
          i.aNow.innerHTML = "Loading";
          i.aTime.innerHTML = "";
        };

        // (D2) ON META LOADED
        i.audio.onloadedmetadata = () => {
          // (D2-1) INIT SET TRACK TIME
          i.aNow.innerHTML = timeString(0);
          i.aTime.innerHTML = timeString(i.audio.duration);

          // (D2-2) SET SEEK BAR MAX TIME
          i.aSeek.max = Math.floor(i.audio.duration);

          // (D2-3) USER CHANGE SEEK BAR TIME
          i.aSeek.oninput = () => (i.seeking = true); // prevents clash with (d2-4)
          i.aSeek.onchange = () => {
            i.audio.currentTime = i.aSeek.value;
            if (!i.audio.paused) {
              i.audio.play();
            }
            i.seeking = false;
          };

          // (D2-4) UPDATE SEEK BAR ON PLAYING
          i.audio.ontimeupdate = () => {
            if (!i.seeking) {
              i.aSeek.value = Math.floor(i.audio.currentTime);
            }
            i.aNow.innerHTML = timeString(i.audio.currentTime);
            let divisionNumber = i.aSeek.getAttribute("max") / 100;
            let rangeNewWidth = Math.floor(i.aSeek.value / divisionNumber);
            if (rangeNewWidth > 95) {
              i.aSeek.nextSibling.style.width = "95%";
            } else {
              i.aSeek.nextSibling.style.width = rangeNewWidth + "%";
            }
          };
        };

        // (E) VOLUME
        i.aVolIco.onclick = () => {
          i.audio.volume = i.audio.volume == 0 ? 1 : 0;
          i.aVolume.value = i.audio.volume;
          i.aVolIco.innerHTML = i.aVolume.value == 0 ? '<i class="fa fa-volume-off"></i>' : '<i class="fa fa-volume-up"></i>';
          if (i.aVolume.value == 0) {
            i.aVolume.nextSibling.style.width = "0%";
          } else {
            i.aVolume.nextSibling.style.width = "95%";
          }
        };
        i.aVolume.onchange = () => {
          i.audio.volume = i.aVolume.value;
          i.aVolIco.innerHTML = i.aVolume.value == 0 ? '<i class="fa fa-volume-off"></i>' : '<i class="fa fa-volume-up"></i>';
        };

        // (F) ENABLE/DISABLE CONTROLS
        i.audio.oncanplaythrough = () => {
          i.aPlay.disabled = false;
          i.aVolume.disabled = false;
          i.aSeek.disabled = false;
        };
        i.audio.onwaiting = () => {
          i.aPlay.disabled = true;
          i.aVolume.disabled = true;
          i.aSeek.disabled = true;
        };

        i.aSeek.addEventListener("input", function () {
          setProgress(this);
        });

        i.aVolume.addEventListener("input", function () {
          setProgress(this);
        });
      }

      document.addEventListener("contextmenu", (e) => {
        e.preventDefault();
      });

      const copo = document.querySelector(".copo");

      function girar() {
        // Dirección aleatoria: sentido horario o antihorario
        const sentido = Math.random() < 0.5 ? 1 : -1;

        // Ángulo aleatorio entre 90 y 360 grados
        const angulo = sentido * (90 + Math.random() * 270);

        // Aplicar la rotación acumulativa
        copo.style.transform = `rotate(${(anguloTotal += angulo)}deg)`;

        // Llamar otra vez después de un intervalo aleatorio (3 a 6 segundos)
        const tiempo = 3000 + Math.random() * 3000;
        setTimeout(girar, tiempo);
      }

      let anguloTotal = 0;
      girar();

      const kanji = document.getElementById("kanji");
      const container = document.getElementById("kanji-container");
      const message = document.getElementById("message");

      function createTrail() {
        const trail = document.createElement("span");
        trail.className = "trail";
        trail.textContent = "強";

        trail.style.left = `${kanji.offsetLeft}px`;
        trail.style.top = `${kanji.offsetTop}px`;

        container.appendChild(trail);

        trail.addEventListener("animationend", () => {
          trail.remove();
        });
      }

      setInterval(createTrail, 1000);

      kanji.addEventListener("click", () => {
        message.classList.add("show");
      });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
  </body>
</html>
